<form>
  <h2>Dynamic Overlay Items</h2>
  <p>
    Add text rows or a background image. Use “Add Text” for regular data and “Add Image” for an image.
  </p>

  <table style="width: 100%; text-align: left;">
    <thead>
      <tr>
        <th>Type</th>
        <th style="width: 50px;">Order</th>
        <th style="width:20%;">Content</th>
        <th>Extra</th>
        <th>Top (px)</th>
        <th>Left (px)</th>
        <th>Hide</th>
        <th style="width: 50px;">Remove</th>
      </tr>
    </thead>
    <tbody>
      {{#each rows}}
      <tr>
        <!-- Hidden field to store the row type -->
        <input type="hidden" name="type-{{this.idx}}" value="{{this.type}}">
        <td>{{this.type}}</td>
        <td style="width: 50px;">
          <button type="button" class="move-up" data-index="{{this.idx}}">↑</button>
          <button type="button" class="move-down" data-index="{{this.idx}}">↓</button>
        </td>
        {{#ifEquals this.type "text"}}
          <td>
            Actor:
            <select name="actorId-{{this.idx}}">
              <option value="">(None)</option>
              {{#each ../allActors}}
                <option value="{{this.id}}" {{#ifEquals this.id ../this.actorId}}selected{{/ifEquals}}>
                  {{this.name}}
                </option>
              {{/each}}
            </select>
            <br>
            Data Field:
            <select name="dataPath-{{this.idx}}">
              {{#each ../dataPathChoices}}
                <option value="{{this.path}}" {{#ifEquals this.path ../this.dataPath}}selected{{/ifEquals}}>
                  {{this.label}}
                </option>
              {{/each}}
            </select>
          </td>
          <td>
            Font Size:
            <input type="number" name="fontSize-{{this.idx}}" value="{{this.fontSize}}" style="width:60px;">
            <br>
            Bold:
            <input type="checkbox" name="bold-{{this.idx}}" {{#if this.bold}}checked{{/if}}>
            <br>
            Font:
            <select name="fontFamily-{{this.idx}}">
              <option value="Arial, sans-serif" {{#ifEquals this.fontFamily "Arial, sans-serif"}}selected{{/ifEquals}}>Arial</option>
              <option value="Verdana, sans-serif" {{#ifEquals this.fontFamily "Verdana, sans-serif"}}selected{{/ifEquals}}>Verdana</option>
              <option value="Trebuchet MS, sans-serif" {{#ifEquals this.fontFamily "Trebuchet MS, sans-serif"}}selected{{/ifEquals}}>Trebuchet MS</option>
              <option value="Impact, sans-serif" {{#ifEquals this.fontFamily "Impact, sans-serif"}}selected{{/ifEquals}}>Impact</option>
              <option value="Georgia, serif" {{#ifEquals this.fontFamily "Georgia, serif"}}selected{{/ifEquals}}>Georgia</option>
              <option value="Times New Roman, serif" {{#ifEquals this.fontFamily "Times New Roman, serif"}}selected{{/ifEquals}}>Times New Roman</option>
              <option value="Courier New, monospace" {{#ifEquals this.fontFamily "Courier New, monospace"}}selected{{/ifEquals}}>Courier New</option>
              <option value="Monaco, monospace" {{#ifEquals this.fontFamily "Monaco, monospace"}}selected{{/ifEquals}}>Monaco</option>
              <option value="Comic Sans MS, cursive" {{#ifEquals this.fontFamily "Comic Sans MS, cursive"}}selected{{/ifEquals}}>Comic Sans MS</option>
              <option value="Brush Script MT, cursive" {{#ifEquals this.fontFamily "Brush Script MT, cursive"}}selected{{/ifEquals}}>Brush Script MT</option>
              <option value="Papyrus, fantasy" {{#ifEquals this.fontFamily "Papyrus, fantasy"}}selected{{/ifEquals}}>Papyrus</option>
            </select>
            <br>
            Colour:
            <input type="color" name="fontColor-{{this.idx}}" value="{{this.fontColor}}" style="width:80px;">
          </td>
        {{else}}
          <td>
            Image Path:
            <input type="text" name="imagePath-{{this.idx}}" value="{{this.imagePath}}" style="width:100%;">
          </td>
          <td>
            Size:
            <input type="number" name="imageSize-{{this.idx}}" value="{{this.imageSize}}" style="width:60px;">
          </td>
        {{/ifEquals}}
        <td>
          <input type="number" name="top-{{this.idx}}" value="{{this.top}}" style="width:60px;">
        </td>
        <td>
          <input type="number" name="left-{{this.idx}}" value="{{this.left}}" style="width:60px;">
        </td>
        <td style="text-align:center;">
          <input type="checkbox" name="hide-{{this.idx}}" {{#if this.hide}}checked{{/if}}>
        </td>
        <td style="text-align:center;">
          <button type="button" class="remove-row" data-index="{{this.idx}}">X</button>
        </td>
      </tr>
      {{/each}}
    </tbody>
  </table>

  <div style="margin-top: 1em;">
    <button type="button" class="add-row">Add Text</button>
    <button type="button" class="add-image">Add Image</button>
  </div>

  <hr />
  <div style="text-align:right; margin-top:1em;">
    <button type="submit" class="dialog-button">Save</button>
  </div>
</form>
